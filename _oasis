OASISFormat: 0.4
Name:        qbf
Version:     0.1
Homepage:    https://github.com/c-cube/ocaml-qbf
Authors:     Simon Cruanes
Maintainers: simon.cruanes@inria.fr
License:     BSD-3-clause
LicenseFile: LICENSE
Plugins:     META (0.4), DevFiles (0.4)
BuildTools:  ocamlbuild

Synopsis:   QBF solving in OCaml, including bindings to solvers
Description:
    Ocaml-qbf provides a unified API to several QBF solvers, along with
    common types for formulas, QCNF and literals and operations such
    as simplifications and reduction to CNF.

    It packs:
    - a binding to quantor, which is shipped with the library
    - a binding to Depqbf

Flag "quantor"
  Description:          build and install the binding "qbf.quantor"
  Default:              false

Flag "random"
  Description:          build and install random generators (depends on "random-generator")
  Default:              false

Flag "depqbf"
  Description:          build and install bindings to DEPQBF (requires it to be installed)
  Default:              false

Library "qbf"
  Path:                 src/
  Modules:              Qbf

if flag(quantor)
    PostConfCommand:    make deps

Library "qbf-quantor"
  Path:                 src/quantor/
  Modules:              Quantor
  CSources:             quantor_stubs.c, quantor_stubs.h
  CCOpt:                -O2 -Wextra -Wno-unused-parameter -I../libs/quantor-3.2/
  CCLib:                -L. -lquantor -lpicosat
  FindlibName:          quantor
  FindlibParent:        qbf
  Build$:               flag(quantor)
  Install$:             flag(quantor)
  BuildDepends:         qbf

# magiiiic so that '-lquantor' works
if flag(quantor)
    PreBuildCommand:    mkdir -p _build && cp libs/quantor-3.2/libquantor.a libs/picosat-960/libpicosat.a _build
    PostInstallCommand: cp libs/quantor-3.2/libquantor.a libs/picosat-960/libpicosat.a `ocamlfind query qbf`

Library "qbf-depqbf"
  Path:                 src/depqbf/
  Modules:              Depqbf
  BuildDepends:         qbf, ctypes, ctypes.foreign
  FindlibName:          depqbf
  FindlibParent:        qbf
  CCLib:                -L/usr/local/lib -lqdpll
  Build$:               flag(depqbf)
  Install$:             flag(depqbf)

Library "qbf-random"
  Path:                 src/random/
  Modules:              QbfRandom
  FindlibName:          random
  FindlibParent:        qbf
  Build$:               flag(random)
  Install$:             flag(random)
  BuildDepends:         qbf, random-generator

Document qbf
  Title:                Qbf docs
  Type:                 ocamlbuild (0.3)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: qbf

Document "qbf-quantor"
  Title:                Qbf bindings to Quantor documentation
  Type:                 ocamlbuild (0.3)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: qbf.quantor
  Build$:               flag(quantor)
  Install$:             flag(quantor)

SourceRepository head
  Type: git
  Location: https://github.com/c-cube/quantor
  Browser: https://github.com/c-cube/quantor/tree/master/src
